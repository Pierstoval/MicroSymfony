{% extends 'base.html.twig' %}

{# If you don't want to use the Stimulus bundle then you can include the controllers
   manually like just below. It will work even, you don't use the asset mapper component
   (you still need symfony/asset) #}

{#
{% block javascripts %}
    {{ parent() }}
    <script type="module" src="{{ asset('js/stimulus.js') }}" defer></script>
{% endblock %}
#}

{% block body %}
    <div class="sub-heading">
        <h2>Some cool and simple JavaScript with Stimulus ðŸª¢</h2>
    </div>

    <p>...without the JS tooling stuff and complexity.</p>

    <p>We use the new  <a target="_blank" href="https://github.com/symfony/asset-mapper">
            Symfony 6.3 asset mapper component</a>.</p>

    <p>Check out the feature intruction on the <a target="_blank" href="https://symfony.com/blog/new-in-symfony-6-3-assetmapper-component">
            Symfony blog</a>.</p>

    <card>
        <grid>
            <div col="1/4">
                <h3>Demo: form+dialog</h3>
            </div>
            <div col="3/4">
                <div {{ stimulus_controller('hello') }}>
                    <form {{ stimulus_target('hello', 'form') }}>
                        <label for="name">Enter your name below and click on the <tag>Great</tag> button
                            <input name="name" required data-hello-target="name" type="text" />
                        </label>

                        <input type="submit" primary data-action="click->hello#greet:prevent" value="Great" />
                    </form>

                    <dialog {{ stimulus_target('hello', 'dialog') }}>
                        <card>
                            <h2 {{ stimulus_target('hello', 'greating') }}></h2>
                            <form method="dialog">
                                <menu>
                                    <button data-action="click->hello#reset">Close</button>
                                </menu>
                            </form>
                        </card>
                    </dialog>
                </div>
            </div>
        </grid>
    </card>

    <card>
        <grid>
            <div col="1/4">
                <h3>Demo: ajax call to API endpoint</h3>
            </div>

            <div col="3/4">
                <div {{ stimulus_controller('api', {url: path('app_slugifyacfion')} )}}">
                    <label for="title">
                        Enter a blog post title below:
                        <input required name="title" {{ stimulus_target('api', 'title') }} data-action="api#slugify" type="text" />
                    </label>

                    <label for="slug">
                        Slug (readonly):
                        <input readonly name="slug" {{ stimulus_target('api', 'slug') }} type="text" />
                    </label>
                </div>
            </div>
        </grid>
    </card>
{% endblock %}
